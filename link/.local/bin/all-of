#!/usr/bin/env python3
# SPDX-FileCopyrightText: Steven Ward
# SPDX-License-Identifier: MPL-2.0

# pylint: disable=invalid-name
# pylint: disable=missing-module-docstring

__author__ = 'Steven Ward'
__license__ = 'MPL-2.0'

import os
import re
import sys

#if not sys.argv[1:]: # empty
#    sys.exit(1)

patterns = tuple(re.compile(arg) for arg in sys.argv[1:])

for line in sys.stdin:
    line = line.rstrip(os.linesep)
    if all(p.search(line) for p in patterns):
        print(line)
